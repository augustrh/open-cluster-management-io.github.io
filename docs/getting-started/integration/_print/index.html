<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://open-cluster-management.io/docs/getting-started/integration/><link rel=alternate type=application/rss+xml href=https://open-cluster-management.io/docs/getting-started/integration/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Add-ons and Integrations | Open Cluster Management</title>
<meta name=description content="Open Cluster Management official site"><meta property="og:url" content="https://open-cluster-management.io/docs/getting-started/integration/"><meta property="og:site_name" content="Open Cluster Management"><meta property="og:title" content="Add-ons and Integrations"><meta property="og:description" content="Enhance the open-cluster-management core control plane with optional add-ons and integrations."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Add-ons and Integrations"><meta itemprop=description content="Enhance the open-cluster-management core control plane with optional add-ons and integrations."><meta itemprop=dateModified content="2024-09-20T07:13:55+08:00"><meta itemprop=wordCount content="11"><meta name=twitter:card content="summary"><meta name=twitter:title content="Add-ons and Integrations"><meta name=twitter:description content="Open Cluster Management official site"><link rel=preload href=/scss/main.min.9b0e3dc51693f8224eb662b4e3e3c75d5e99c339ca8614a06f6c8a92371a2819.css as=style><link href=/scss/main.min.9b0e3dc51693f8224eb662b4e3e3c75d5e99c339ca8614a06f6c8a92371a2819.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script></head><body class=td-section><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 77.76 75.84"><defs><style>.cls-1{fill:none}.cls-2{fill:#fff}.cls-3{clip-path:url(#clip-path)}.cls-4{clip-path:url(#clip-path-2)}</style><clipPath id="clip-path" transform="translate(5.38 5.32)"><path class="cls-1" d="M67.11 39.69 61.34 14.61a4.48 4.48.0 00-2.42-3L35.55.44A4.52 4.52.0 0033.38.0a4.36 4.36.0 00-1.71.43L8.3 11.61a4.41 4.41.0 00-2.42 3L.11 39.7a4.37 4.37.0 00.61 3.39c.08.13.16.24.25.36L17.15 63.56a4.49 4.49.0 003.49 1.67H46.58a4.5 4.5.0 003.5-1.66L66.25 43.44A4.37 4.37.0 0067.11 39.69zM52.3 34.43a18.71 18.71.0 01-34.09 9.82c3.87-1.37 15.74-5.69 8.4-4.44A87.29 87.29.0 0116.1 41h-.42c-.57.0-1.13.0-1.67.0h-.37c-.54.0-1.07.0-1.58.0h-.31q-.77.0-1.47-.12c-2.78-.31-4.61-1.08-4.51-2.54.25-3.72 9.12-5.71 9.12-5.71a18.7 18.7.0 0134-9.82c-3.93 1.4-15.64 5.66-8.34 4.41a87.13 87.13.0 0110.5-1.16h.43 1.66.37q.82.0 1.59.0h.31c.51.0 1 .07 1.46.12 2.78.31 4.62 1.08 4.52 2.53C61.15 32.41 52.45 34.4 52.3 34.43z"/></clipPath><clipPath id="clip-path-2" transform="translate(5.38 5.32)"><rect class="cls-1" x="-5" y="-5" width="77.22" height="75.23"/></clipPath></defs><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path id="path3055" class="cls-2" d="M34.64 3.44a4.06 4.06.0 00-1.53.38l-20.91 10A4 4 0 0010 16.51L4.87 39a3.93 3.93.0 00.55 3 3.62 3.62.0 00.22.32l14.48 18a4 4 0 003.13 1.5H46.46a4 4 0 003.12-1.49l14.47-18A3.9 3.9.0 0064.82 39L59.66 16.5a4 4 0 00-2.17-2.69l-20.91-10A4 4 0 0034.64 3.44z" transform="translate(5.38 5.32)"/><g class="cls-3"><g class="cls-4"><image width="162" height="158" transform="scale(0.48)" xlink:href="data:image/png;base64,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"/></g></g></g></g></svg></span><span class=navbar-brand__name>Open Cluster Management</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class="nav-link active" href=/docs/><span>Documentation</span></a></li><li class=nav-item><a class=nav-link href=/community/><span>Community</span></a></li><li class=nav-item><a class=nav-link href=/blog/><span>Blog</span></a></li><li class=nav-item><a class=nav-link href=https://github.com/open-cluster-management-io/ocm target=_blank rel=noopener><i class="fab fa-github"></i><span>GitHub</span></a></li></ul></div><div class="d-none d-lg-block"></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/docs/getting-started/integration/>Return to the regular view of this page</a>.</p></div><h1 class=title>Add-ons and Integrations</h1><ul><li>1: <a href=#pg-fbfe1d4ee41edbd2d79ba19791790925>Application lifecycle management</a></li><li>2: <a href=#pg-aa34d12e6f79e33b7aa948ed49652fe7>Cluster proxy</a></li><li>3: <a href=#pg-2d647ed2ebf02e492abdea9b64b40daa>Managed service account</a></li><li>4: <a href=#pg-8318b29c9ea3dd68aa88f43f034ac44b>Policy controllers</a></li><ul><li>4.1: <a href=#pg-e58634300ebdc6b417c2d11c29bffedd>Configuration Policy</a></li><li>4.2: <a href=#pg-da965a88320ed64c7db3afc8a1398f1e>Open Policy Agent Gatekeeper</a></li></ul><li>5: <a href=#pg-df1008e4da70f926bb56d3f52f741b71>Policy framework</a></li></ul><div class=content><p>Enhance the open-cluster-management core control plane with optional add-ons and integrations.</p></div></div><div class=td-content><h1 id=pg-fbfe1d4ee41edbd2d79ba19791790925>1 - Application lifecycle management</h1><p>After the cluster manager is installed, you could install the application management components to the hub cluster.</p><h2 id=architecture>Architecture</h2><div style=text-align:center;padding:20px><img src=https://github.com/open-cluster-management-io/multicloud-operators-subscription/raw/main/images/architecture.png alt="application lifecycle management architecture" style="margin:0 auto;width:80%"></div><p>For more details, visit the <a href=https://github.com/open-cluster-management-io/multicloud-operators-subscription>multicloud-operators-subscription GitHub page</a>.</p><h2 id=prerequisite>Prerequisite</h2><p>You must meet the following prerequisites to install the application lifecycle management add-on:</p><ul><li><p>Ensure <a href=https://kubernetes.io/docs/tasks/tools/install-kubectl>kubectl</a> and <a href=https://kubectl.docs.kubernetes.io/installation/kustomize/>kustomize</a> are installed.</p></li><li><p>Ensure the <code>open-cluster-management</code> <em>cluster manager</em> is installed. See <a href=https://open-cluster-management.io/docs/getting-started/installation/start-the-control-plane/>Start the control plane</a> for more information.</p></li><li><p>Ensure the <code>open-cluster-management</code> <em>klusterlet</em> is installed. See <a href=https://open-cluster-management.io/docs/getting-started/installation/register-a-cluster/>Register a cluster</a> for more information.</p></li></ul><h2 id=install-via-clusteradm-cli-tool>Install via Clusteradm CLI tool</h2><p>Ensure <code>clusteradm</code> CLI tool is installed. Download and extract the <a href=https://github.com/open-cluster-management-io/clusteradm/releases/latest>clusteradm binary</a>. For more details see the <a href=https://github.com/open-cluster-management-io/clusteradm/blob/main/README.md#quick-start>clusteradm GitHub page</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ clusteradm
</span></span><span style=display:flex><span>Usage:
</span></span><span style=display:flex><span>  clusteradm <span style=color:#ce5c00;font-weight:700>[</span>command<span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>Deploy the subscription operators to the hub cluster.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl config use-context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>$ clusteradm install hub-addon --names application-manager
</span></span><span style=display:flex><span>Installing built-in application-manager add-on to the Hub cluster...
</span></span><span style=display:flex><span>$ kubectl -n open-cluster-management get deploy multicluster-operators-subscription --context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>NAME                                READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style=display:flex><span>multicluster-operators-subscription   1/1     <span style=color:#0000cf;font-weight:700>1</span>            <span style=color:#0000cf;font-weight:700>1</span>           25s
</span></span></code></pre></div><p>Create the <code>open-cluster-management-agent-addon</code> namespace on the managed cluster.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl create ns open-cluster-management-agent-addon --context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_MANAGED_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>namespace/open-cluster-management-agent-addon created
</span></span></code></pre></div><p>Deploy the subscription add-on in corresponding managed cluster namespace on the hub cluster.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl config use-context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>$ clusteradm addon <span style=color:#204a87>enable</span> --names application-manager --clusters <span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_CLUSTER_NAME</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>Deploying application-manager add-on to managed cluster: &lt;managed_cluster_name&gt;.
</span></span><span style=display:flex><span>$ kubectl -n <span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_CLUSTER_NAME</span><span style=color:#4e9a06>}</span> get managedclusteraddon <span style=color:#8f5902;font-style:italic># kubectl -n cluster1 get managedclusteraddon</span>
</span></span><span style=display:flex><span>NAME                  AVAILABLE   DEGRADED   PROGRESSING
</span></span><span style=display:flex><span>application-manager   True
</span></span></code></pre></div><p>Check the the subscription add-on deployment on the managed cluster.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl -n open-cluster-management-agent-addon get deploy --context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_MANAGED_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>NAME                  READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style=display:flex><span>application-manager   1/1     <span style=color:#0000cf;font-weight:700>1</span>            <span style=color:#0000cf;font-weight:700>1</span>           103s
</span></span></code></pre></div><h2 id=install-from-source>Install from source</h2><p>Clone the <code>multicloud-operators-subscription</code> repository.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>git clone https://github.com/open-cluster-management-io/multicloud-operators-subscription
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> multicloud-operators-subscription
</span></span></code></pre></div><p>Deploy the subscription operators to the hub cluster.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl config use-context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>$ make deploy-hub
</span></span><span style=display:flex><span>$ kubectl -n open-cluster-management get deploy multicluster-operators-subscription --context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>NAME                                READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style=display:flex><span>multicluster-operators-subscription   1/1     <span style=color:#0000cf;font-weight:700>1</span>            <span style=color:#0000cf;font-weight:700>1</span>           25s
</span></span></code></pre></div><p>Create the <code>open-cluster-management-agent-addon</code> namespace on the managed cluster and it&rsquo;s optional if <code>clusteradm</code> is used which create the ns during <code>join</code> action.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl create ns open-cluster-management-agent-addon --context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_MANAGED_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>namespace/open-cluster-management-agent-addon created
</span></span></code></pre></div><p>Deploy the subscription add-on in corresponding managed cluster namespace on the hub cluster.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl config use-context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>$ make deploy-addon
</span></span><span style=display:flex><span>$ kubectl -n <span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_CLUSTER_NAME</span><span style=color:#4e9a06>}</span> get managedclusteraddon <span style=color:#8f5902;font-style:italic># kubectl -n cluster1 get managedclusteraddon</span>
</span></span><span style=display:flex><span>NAME                  AVAILABLE   DEGRADED   PROGRESSING
</span></span><span style=display:flex><span>application-manager   True
</span></span></code></pre></div><p>Check the the subscription add-on deployment on the managed cluster.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl -n open-cluster-management-agent-addon get deploy --context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_MANAGED_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>NAME                  READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style=display:flex><span>application-manager   1/1     <span style=color:#0000cf;font-weight:700>1</span>            <span style=color:#0000cf;font-weight:700>1</span>           103s
</span></span></code></pre></div><h2 id=what-is-next>What is next</h2><p>After a successful deployment, test the subscription operator with a <code>helm</code> subscription. Run the following command where the examples/helmrepo-hub-channel locates at <a href=https://github.com/open-cluster-management-io/multicloud-operators-subscription/tree/main/examples/helmrepo-hub-channel>here</a>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>kubectl apply -f examples/helmrepo-hub-channel --context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span></code></pre></div><p>After a while, you should see the subscription is propagated to the managed cluster and the Helm app is installed. By default, when a subscribed applications is deployed to the target clusters, the applications are installed in the coresponding subscription namespace. To confirm, run the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl get subscriptions.apps --context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_MANAGED_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>NAME        STATUS       AGE    LOCAL PLACEMENT   TIME WINDOW
</span></span><span style=display:flex><span>nginx-sub   Subscribed   107m   <span style=color:#204a87>true</span>
</span></span><span style=display:flex><span>$ kubectl get pod --context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_MANAGED_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>NAME                                                   READY   STATUS      RESTARTS   AGE
</span></span><span style=display:flex><span>nginx-ingress-47f79-controller-6f495bb5f9-lpv7z        1/1     Running     <span style=color:#0000cf;font-weight:700>0</span>          108m
</span></span><span style=display:flex><span>nginx-ingress-47f79-default-backend-7559599b64-rhwgm   1/1     Running     <span style=color:#0000cf;font-weight:700>0</span>          108m
</span></span></code></pre></div><h3 id=try-this-out>Try this out</h3><p>Let <a href=https://open-cluster-management.io/docs/developer-guides/vscode-extension/>VScode Extension</a> help you out!</p><p>Create a Bootstrap Project specifically tailored to your channel type, with all the Custom Resource (CR) templates you will need already auto-generated to get you started!</p></div><div class=td-content style=page-break-before:always><h1 id=pg-aa34d12e6f79e33b7aa948ed49652fe7>2 - Cluster proxy</h1><p><a href=https://github.com/open-cluster-management-io/cluster-proxy>Cluster proxy</a>
is an OCM addon providing L4 network connectivity from hub cluster to
the managed clusters without <strong>any additional requirement</strong> to the managed
cluster&rsquo;s network infrastructure by leveraging the Kubernetes official SIG
sub-project <a href=https://github.com/kubernetes-sigs/apiserver-network-proxy>apiserver-network-proxy</a>.</p><h2 id=background>Background</h2><p>The original architecture of OCM allows a cluster from anywhere to be
registered and managed by OCM&rsquo;s control plane (i.e. the hub cluster)
as long as a <a href=https://open-cluster-management.io/docs/getting-started/installation/register-a-cluster/>klusterlet agent</a>
can reach hub cluster&rsquo;s endpoint. So the minimal requirement for the
managed cluster&rsquo;s network infrastructure in OCM is &ldquo;klusterlet -> hub&rdquo;
connectivity. However, there are still some cases where the components
in the hub cluster hope to proactively dail/request the services in the
managed clusters which will need the &ldquo;hub -> klusterlet&rdquo; connectivity on
the other hand. In addition to that, the cases can be even more complex
when each of the managed clusters are not in the same network.</p><p>Cluster proxy is aiming at seamlessly delivering the outbound L4 requests
to the services in the managed cluster&rsquo;s network without any assumptions
upon the infrastructure as long as the clusters are successfully registered.
Basically the connectivity provided by cluster proxy is working over the
secured reserve proxy tunnels established by the apiserver-network-proxy.</p><h3 id=about-apiserver-network-proxy>About apiserver-network-proxy</h3><p>Apiserver-network-proxy is the underlying technique of a Kubernetes'
feature called <a href=https://kubernetes.io/docs/tasks/extend-kubernetes/setup-konnectivity/>konnectivity egress-selector</a>
which is majorly for setting up a TCP-level proxy for kube-apiserver
to get access to the node/cluster network. Here are a few terms we need
to clarify before we elaborate on how the cluster proxy resolve multi-cluster
control plane network connectivity for us:</p><ul><li><strong>Proxy Tunnel</strong>: A Grpc long connection that multiplexes and transmits
TCP-level traffic from the proxy servers to the proxy agents. Note that
there will be only one tunnel instance between each pair of server and
agent.</li><li><strong>Proxy Server</strong>: An mTLS Grpc server opened for establishing tunnels
which is the traffic ingress of proxy tunnel.</li><li><strong>Proxy Agent</strong>: A mTLS Grpc agent that maintains the tunnel between the
server and is also the egress of the proxy tunnel.</li><li><strong>Konnectivity Client</strong>: The SDK library for talking through the tunnel.
Applicable to any Golang client of which the <code>Dialer</code> is overridable.
Note that for non-golang clients, the proxy server also supports
HTTP-Connect based proxying as alternative.</li></ul><h2 id=architecture>Architecture</h2><p>Cluster proxy runs inside OCM&rsquo;s hub cluster as an addon manager which is
developed based on the <a href=https://open-cluster-management.io/docs/concepts/addon/>Addon-Framework</a>.
The addon manager of cluster proxy will be responsible for:</p><ol><li>Managing the installation of proxy servers in the hub cluster.</li><li>Managing the installation of proxy agents in the managed cluster.</li><li>Collecting healthiness and the other stats consistently in the hub cluster.</li></ol><p>The following picture shows the overall architecture of cluster proxy:</p><div style=text-align:center;padding:20px><img src=/cluster-proxy-architecture.png alt="Cluster proxy architecture" style="margin:0 auto;width:60%"></div><p>Note that the green lines in the picture above is the active proxy tunnels
between proxy servers and agents, and HA setup is natively supported by
apiserver-network-proxy both for the servers and the agents. The orange
dash line started by the konnectivity client is the path of how the traffic
flows from the hub cluster to arbitrary managed clusters. Meanwhile the core
components including registration and work will help us manage the lifecycle
of all the components distributed in the multiple managed clusters, so the
hub admin won&rsquo;t need to directly operate the managed clusters to install
or configure the proxy agents no more.</p><h2 id=prerequisite>Prerequisite</h2><p>You must meet the following prerequisites to install the cluster-proxy:</p><ul><li><p>Ensure your <code>open-cluster-management</code> release is greater than <code>v0.5.0</code>.</p></li><li><p>Ensure <a href=https://kubernetes.io/docs/tasks/tools/install-kubectl><code>kubectl</code></a> is installed.</p></li><li><p>Ensure <a href=https://helm.sh/docs/intro/install/><code>helm</code></a> is installed.</p></li></ul><h2 id=installation>Installation</h2><p>To install the cluster proxy addon to the OCM control plane, run:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ helm repo add ocm https://open-cluster-management.io/helm-charts
</span></span><span style=display:flex><span>$ helm repo update
</span></span><span style=display:flex><span>$ helm search repo ocm
</span></span><span style=display:flex><span>NAME                              	CHART VERSION	APP VERSION	DESCRIPTION
</span></span><span style=display:flex><span>ocm/cluster-proxy                 	v0.1.1       	1.0.0      	A Helm chart <span style=color:#204a87;font-weight:700>for</span> Cluster-Proxy
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>Then run the following helm command to install the cluster-proxy addon:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ helm install -n open-cluster-management-addon --create-namespace <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    cluster-proxy ocm/cluster-proxy
</span></span><span style=display:flex><span>$ kubectl -n open-cluster-management-addon get deploy
</span></span><span style=display:flex><span>NAME                                   READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style=display:flex><span>cluster-proxy                          3/3     <span style=color:#0000cf;font-weight:700>3</span>            <span style=color:#0000cf;font-weight:700>3</span>           24h
</span></span><span style=display:flex><span>cluster-proxy-addon-manager            1/1     <span style=color:#0000cf;font-weight:700>1</span>            <span style=color:#0000cf;font-weight:700>1</span>           24h
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>Then the addon manager of cluster-proxy will be created into the hub cluster
in the form of a deployment named <code>cluster-proxy-addon-manager</code>. As is also
shown above, the proxy servers will also be created as deployment resource
called <code>cluster-proxy</code>.</p><p>By default, the addon manager will be automatically discovering the addition
or removal the managed clusters and installs the proxy agents into them on
the fly. To check out the healthiness status of the proxy agents, we can run:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$  kubectl get managedclusteraddon -A
</span></span><span style=display:flex><span>NAMESPACE     NAME                     AVAILABLE   DEGRADED   PROGRESSING
</span></span><span style=display:flex><span>&lt;cluster#1&gt;   cluster-proxy            True
</span></span><span style=display:flex><span>&lt;cluster#2&gt;   cluster-proxy            True
</span></span></code></pre></div><p>The proxy agent distributed in the managed cluster will be periodically
renewing the lease lock of the addon instance.</p><h2 id=usage>Usage</h2><h3 id=command-line-tools>Command-line tools</h3><p>Using the <a href=https://open-cluster-management.io/getting-started/quick-start/#install-clusteradm-cli-tool>clusteradm</a>
to check the status of the cluster-proxy addon:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ clusteradm proxy health
</span></span><span style=display:flex><span>CLUSTER NAME    INSTALLED    AVAILABLE    PROBED HEALTH    LATENCY
</span></span><span style=display:flex><span>&lt;cluster#1&gt;     True         True         True             67.595144ms
</span></span><span style=display:flex><span>&lt;cluster#2&gt;     True         True         True             85.418368ms
</span></span></code></pre></div><h3 id=example-code>Example code</h3><p>An <a href=https://github.com/open-cluster-management-io/cluster-proxy/blob/main/examples/test-client/main.go>example client</a>
in the cluster proxy repo shows us how to dynamically talk to the kube-apiserver
of a managed cluster from the hub cluster by simply prescribing the name of
the target cluster. Here&rsquo;s also a TL;DR code snippet:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 1. instantiate a dialing tunnel instance.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// NOTE: recommended to be a singleton in your golang program.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>tunnel</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>konnectivity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>CreateSingleUseGrpcTunnel</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>TODO</span><span style=color:#000;font-weight:700>(),</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>your</span> <span style=color:#000>proxy</span> <span style=color:#000>server</span> <span style=color:#000>endpoint</span><span style=color:#000;font-weight:700>&gt;,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>grpc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithTransportCredentials</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>grpccredentials</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewTLS</span><span style=color:#000;font-weight:700>(&lt;</span><span style=color:#000>your</span> <span style=color:#000>proxy</span> <span style=color:#000>server</span> <span style=color:#000>TLS</span> <span style=color:#000>config</span><span style=color:#000;font-weight:700>&gt;)),</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>...</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 2. Overriding the Dialer to tunnel. Dialer is a common abstraction
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// in Golang SDK.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>cfg</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Dial</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>tunnel</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DialContext</span>
</span></span></code></pre></div><p>Another example will be <a href=https://github.com/oam-dev/cluster-gateway/blob/063b60e959ba607f0108c8b4cb99963f82f504b5/pkg/apis/cluster/v1alpha1/transport.go#L50-L58>cluster-gateway</a>
which is an aggregated apiserver optionally working over cluster-proxy for
routing traffic to the managed clusters dynamically in HTTPs protocol.</p><p>Note that by default the client credential for konnectivity client will be
persisted as secrets resources under the namespace where the addon-manager
is running. With that being said, to mount the secret to the systems in the
other namespaces, the users are expected to copy the secret on their own
manually.</p><h2 id=more-insights>More insights</h2><h3 id=troubleshooting>Troubleshooting</h3><p>The installation of proxy servers and agents are prescribed by the custom
resource called &ldquo;managedproxyconfiguration&rdquo;. We can check it out by the
following commands:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ kubectl get managedproxyconfiguration cluster-proxy -o yaml
</span></span><span style=display:flex><span>apiVersion: proxy.open-cluster-management.io/v1alpha1
</span></span><span style=display:flex><span>kind: ManagedProxyConfiguration
</span></span><span style=display:flex><span>metadata: ...
</span></span><span style=display:flex><span>spec:
</span></span><span style=display:flex><span>  proxyAgent:
</span></span><span style=display:flex><span>    image: &lt;expected image of the proxy agents&gt;
</span></span><span style=display:flex><span>    replicas: &lt;expected replicas of proxy agents&gt;
</span></span><span style=display:flex><span>  proxyServer:
</span></span><span style=display:flex><span>    entrypoint:
</span></span><span style=display:flex><span>      loadBalancerService:
</span></span><span style=display:flex><span>        name: proxy-agent-entrypoint
</span></span><span style=display:flex><span>      type: LoadBalancerService <span style=color:#8f5902;font-style:italic># Or &#34;Hostname&#34; to set a fixed address</span>
</span></span><span style=display:flex><span>                                <span style=color:#8f5902;font-style:italic># for establishing proxy tunnels.</span>
</span></span><span style=display:flex><span>    image: &lt;expected image of the proxy servers&gt;
</span></span><span style=display:flex><span>    inClusterServiceName: proxy-entrypoint
</span></span><span style=display:flex><span>    namespace: &lt;target namespace to install proxy server&gt;
</span></span><span style=display:flex><span>    replicas: &lt;expected replicas of proxy servers&gt;
</span></span><span style=display:flex><span>  authentication: <span style=color:#8f5902;font-style:italic># Customize authentication between proxy server/agent</span>
</span></span><span style=display:flex><span>status:
</span></span><span style=display:flex><span>  conditions: ...
</span></span></code></pre></div><h3 id=related-materials>Related materials</h3><p>See the original <a href=https://github.com/open-cluster-management-io/enhancements/tree/main/enhancements/sig-architecture/14-addon-cluster-proxy>design proposal</a>
for reference.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-2d647ed2ebf02e492abdea9b64b40daa>3 - Managed service account</h1><p><a href=https://github.com/open-cluster-management-io/managed-serviceaccount>Managed Service Account</a>
is an OCM addon enabling a hub cluster admin to manage <a href=https://kubernetes.io/docs/reference/access-authn-authz/service-accounts-admin/>service account</a>
across multiple clusters on ease. By controlling the creation and removal of
the service account, the addon agent will project and rotate the corresponding
token back to the hub cluster which is very useful for the Kube API client from
the hub cluster to request against the managed clusters.</p><h2 id=background>Background</h2><p>Normally there are two major approaches for a Kube API client to authenticate
and access a Kubernetes cluster:</p><ul><li>Valid X.509 certificate-key pair</li><li>Service account bearer token</li></ul><p>The service account token will be automatically persisted as a secret
resource inside the hosting Kubernetes clusters upon creation, which is commonly
used for the <a href=https://github.com/kubernetes/client-go/tree/master/examples/in-cluster-client-configuration>&ldquo;in-cluster&rdquo;</a>
client. However, in terms of OCM, the hub cluster is completely an external
system to the managed clusters, so we will need a local agent in each managed
cluster to reflect the tokens consistently to the hub cluster so that the
Kube API client from hub cluster can &ldquo;push&rdquo; the requests directly against the
managed cluster. By delegating the multi-cluster service account management to
this addon, we can:</p><ul><li>Project the service account token from the managed clusters to the hub cluster
with custom API audience.</li><li>Rotate the service account tokens dynamically.</li><li>Homogenize the client identities so that we can easily write a static RBAC
policy that applies to multiple managed clusters.</li></ul><h2 id=prerequisite>Prerequisite</h2><p>You must meet the following prerequisites to install the managed service
account:</p><ul><li><p>Ensure your <code>open-cluster-management</code> release is greater than <code>v0.5.0</code>.</p></li><li><p>Ensure <a href=https://kubernetes.io/docs/tasks/tools/install-kubectl><code>kubectl</code></a> is installed.</p></li><li><p>Ensure <a href=https://helm.sh/docs/intro/install/><code>helm</code></a> is installed.</p></li></ul><h2 id=installation>Installation</h2><p>To install the managed service account addon to the OCM control plane, run:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ helm repo add ocm https://open-cluster-management.io/helm-charts
</span></span><span style=display:flex><span>$ helm repo update
</span></span><span style=display:flex><span>$ helm search repo ocm
</span></span><span style=display:flex><span>NAME                              	CHART VERSION	APP VERSION	DESCRIPTION
</span></span><span style=display:flex><span>ocm/managed-serviceaccount          &lt;...&gt;           1.0.0       A Helm chart <span style=color:#204a87;font-weight:700>for</span> Managed ServiceAccount Addon
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>Then run the following helm command to continue the installation:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ helm install -n open-cluster-management-addon --create-namespace <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    managed-serviceaccount  ocm/managed-serviceaccount
</span></span><span style=display:flex><span>$ kubectl -n open-cluster-management-addon get pod
</span></span><span style=display:flex><span>NAME                                                    READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>managed-serviceaccount-addon-manager-5m9c95b7d8-xsb94   1/1     Running   <span style=color:#0000cf;font-weight:700>1</span>          4d4h
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>By default, the addon manager will be automatically discovering the addition or
removal the managed clusters and installs the managed serviceaccount agents into
them on the fly. To check out the healthiness status of the managed serviceaccount
agents, we can run:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ kubectl get managedclusteraddon -A
</span></span><span style=display:flex><span>NAMESPACE         NAME                     AVAILABLE   DEGRADED   PROGRESSING
</span></span><span style=display:flex><span>&lt;cluster name&gt;    managed-serviceaccount   True
</span></span></code></pre></div><h2 id=usage>Usage</h2><p>To exercise the new <code>ManagedServiceAccount</code> API introduced by this addon, we
can start by applying the following sample resource:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ <span style=color:#204a87>export</span> <span style=color:#000>CLUSTER_NAME</span><span style=color:#ce5c00;font-weight:700>=</span>&lt;cluster name&gt;
</span></span><span style=display:flex><span>$ kubectl create -f - <span style=color:#4e9a06>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>apiVersion: authentication.open-cluster-management.io/v1alpha1
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>kind: ManagedServiceAccount
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>metadata:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  name: my-sample
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  namespace: ${CLUSTER_NAME}
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>spec:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  rotation: {}
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>EOF</span>
</span></span></code></pre></div><p>Then the addon agent in each of the managed cluster is responsible for
executing and refreshing the status of the <code>ManagedServiceAccount</code>, e.g.:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ kubectl describe ManagedServiceAccount -n cluster1
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>  status:
</span></span><span style=display:flex><span>    conditions:
</span></span><span style=display:flex><span>    - lastTransitionTime: <span style=color:#4e9a06>&#34;2021-12-09T09:08:15Z&#34;</span>
</span></span><span style=display:flex><span>      message: <span style=color:#4e9a06>&#34;&#34;</span>
</span></span><span style=display:flex><span>      reason: TokenReported
</span></span><span style=display:flex><span>      status: <span style=color:#4e9a06>&#34;True&#34;</span>
</span></span><span style=display:flex><span>      type: TokenReported
</span></span><span style=display:flex><span>    - lastTransitionTime: <span style=color:#4e9a06>&#34;2021-12-09T09:08:15Z&#34;</span>
</span></span><span style=display:flex><span>      message: <span style=color:#4e9a06>&#34;&#34;</span>
</span></span><span style=display:flex><span>      reason: SecretCreated
</span></span><span style=display:flex><span>      status: <span style=color:#4e9a06>&#34;True&#34;</span>
</span></span><span style=display:flex><span>      type: SecretCreated
</span></span><span style=display:flex><span>    expirationTimestamp: <span style=color:#4e9a06>&#34;2022-12-04T09:08:15Z&#34;</span>
</span></span><span style=display:flex><span>    tokenSecretRef:
</span></span><span style=display:flex><span>      lastRefreshTimestamp: <span style=color:#4e9a06>&#34;2021-12-09T09:08:15Z&#34;</span>
</span></span><span style=display:flex><span>      name: my-sample
</span></span></code></pre></div><p>The service account will be created in the managed cluster (assume the name is <code>cluster1</code>):</p><pre tabindex=0><code>$ kubectl get sa my-sample -n open-cluster-management-managed-serviceaccount --context kind-cluster1
NAME        SECRETS   AGE
my-sample   1         9m57s
</code></pre><p>The corresponding secret will also be created in the hub cluster, which is
visible via:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ kubectl -n &lt;your cluster&gt; get secret my-sample
</span></span><span style=display:flex><span>NAME        TYPE     DATA   AGE
</span></span><span style=display:flex><span>my-sample   Opaque   <span style=color:#0000cf;font-weight:700>2</span>      2m23s
</span></span></code></pre></div><h2 id=related-materials>Related materials</h2><p>Repo: <a href=https://github.com/open-cluster-management-io/managed-serviceaccount>https://github.com/open-cluster-management-io/managed-serviceaccount</a></p><p>See the design proposal at: <a href=https://github.com/open-cluster-management-io/enhancements/tree/main/enhancements/sig-architecture/19-projected-serviceaccount-token>https://github.com/open-cluster-management-io/enhancements/tree/main/enhancements/sig-architecture/19-projected-serviceaccount-token</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-8318b29c9ea3dd68aa88f43f034ac44b>4 - Policy controllers</h1><p>The <a href=https://open-cluster-management.io/docs/concepts/policy/>Policy API</a> on the hub delivers the policies defined in <code>spec.policy-templates</code> to the managed
clusters via the <a href=https://open-cluster-management.io/docs/getting-started/integration/policy-framework/>policy framework controllers</a>. Once on the managed
cluster, these <em>Policy Templates</em> are acted upon by the associated controller on the managed cluster. The policy
framework supports delivering the <em>Policy Template</em> kinds listed.</p><h2 id=configuration-policyhahahugoshortcode68s2hbhb><a href=https://open-cluster-management.io/docs/getting-started/integration/policy-controllers/configuration-policy/>Configuration policy</a></h2><p>The <code>ConfigurationPolicy</code> is provided by OCM and defines Kubernetes manifests to compare with objects that currently
exist on the cluster. The action that the <code>ConfigurationPolicy</code> will take is determined by its <code>complianceType</code>.
Compliance types include <code>musthave</code>, <code>mustnothave</code>, and <code>mustonlyhave</code>. <code>musthave</code> means the object should have the
listed keys and values as a subset of the larger object. <code>mustnothave</code> means an object matching the listed keys and
values should not exist. <code>mustonlyhave</code> ensures objects only exist with the keys and values exactly as defined.</p><h2 id=open-policy-agent-gatekeeperhahahugoshortcode68s3hbhb><a href=https://open-cluster-management.io/docs/getting-started/integration/policy-controllers/gatekeeper/>Open Policy Agent Gatekeeper</a></h2><p>Gatekeeper is a validating webhook with auditing capabilities that can enforce custom resource definition-based
policies that are run with the Open Policy Agent (OPA). Gatekeeper <code>ConstraintTemplates</code> and constraints can be
provided in an OCM <code>Policy</code> to sync to managed clusters that have Gatekeeper installed on them.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-e58634300ebdc6b417c2d11c29bffedd>4.1 - Configuration Policy</h1><p>The <code>ConfigurationPolicy</code> defines Kubernetes manifests to compare with objects that currently exist on the cluster. The
Configuration policy controller is provided by Open Cluster Management and runs on managed clusters.</p><h2 id=prerequisites>Prerequisites</h2><p>You must meet the following prerequisites to install the configuration policy controller:</p><ul><li><p>Ensure <a href=https://kubernetes.io/docs/tasks/tools/install-kubectl><code>kubectl</code></a> and
<a href=https://kubectl.docs.kubernetes.io/installation/kustomize/><code>kustomize</code></a> are installed.</p></li><li><p>Ensure <a href=https://golang.org/doc/install>Golang</a> is installed, if you are planning to install from the source.</p></li><li><p>Ensure the <code>open-cluster-management</code> <em>policy framework</em> is installed. See
<a href=https://open-cluster-management.io/docs/getting-started/integration/policy-framework/>Policy Framework</a> for more information.</p></li></ul><h2 id=installing-the-configuration-policy-controller>Installing the configuration policy controller</h2><h3 id=deploy-via-clusteradm-cli>Deploy via Clusteradm CLI</h3><p>Ensure <code>clusteradm</code> CLI is installed and is newer than v0.3.0. Download and extract the
<a href=https://github.com/open-cluster-management-io/clusteradm/releases/latest>clusteradm binary</a>. For more details see the
<a href=https://github.com/open-cluster-management-io/clusteradm/blob/main/README.md#quick-start>clusteradm GitHub page</a>.</p><ol><li><p>Deploy the configuration policy controller to the managed clusters (this command is the same for a self-managed hub):</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Deploy the configuration policy controller</span>
</span></span><span style=display:flex><span>clusteradm addon <span style=color:#204a87>enable</span> addon --names config-policy-controller --clusters &lt;cluster_name&gt; --context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span></code></pre></div></li><li><p>Ensure the pod is running on the managed cluster with the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl get pods -n open-cluster-management-agent-addon
</span></span><span style=display:flex><span>NAME                                               READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>config-policy-controller-7f8fb64d8c-pmfx4          1/1     Running   <span style=color:#0000cf;font-weight:700>0</span>          44s
</span></span></code></pre></div></li></ol><h3 id=deploy-from-source>Deploy from source</h3><ol><li><p>Deploy the <code>config-policy-controller</code> to the managed cluster with the following commands:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># The context name of the clusters in your kubeconfig</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># If the clusters are created by KinD, then the context name will the follow the pattern &#34;kind-&lt;cluster name&gt;&#34;.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#ce5c00;font-weight:700>=</span>&lt;your hub cluster context&gt;           <span style=color:#8f5902;font-style:italic># export CTX_HUB_CLUSTER=kind-hub</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>CTX_MANAGED_CLUSTER</span><span style=color:#ce5c00;font-weight:700>=</span>&lt;your managed cluster context&gt;   <span style=color:#8f5902;font-style:italic># export CTX_MANAGED_CLUSTER=kind-cluster1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Configure kubectl to point to the managed cluster</span>
</span></span><span style=display:flex><span>kubectl config use-context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_MANAGED_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Create the namespace for the controller</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>MANAGED_NAMESPACE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;open-cluster-management-agent-addon&#34;</span>
</span></span><span style=display:flex><span>kubectl create ns <span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_NAMESPACE</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Apply the CRD</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>COMPONENT</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;config-policy-controller&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>GIT_PATH</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;https://raw.githubusercontent.com/open-cluster-management-io/</span><span style=color:#4e9a06>${</span><span style=color:#000>COMPONENT</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>/v0.12.0/deploy&#34;</span>
</span></span><span style=display:flex><span>kubectl apply -f <span style=color:#4e9a06>${</span><span style=color:#000>GIT_PATH</span><span style=color:#4e9a06>}</span>/crds/policy.open-cluster-management.io_configurationpolicies.yaml
</span></span><span style=display:flex><span>kubectl apply -f <span style=color:#4e9a06>${</span><span style=color:#000>GIT_PATH</span><span style=color:#4e9a06>}</span>/crds/policy.open-cluster-management.io_operatorpolicies.yaml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Set the managed cluster name</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>MANAGED_CLUSTER_NAME</span><span style=color:#ce5c00;font-weight:700>=</span>&lt;your managed cluster name&gt;  <span style=color:#8f5902;font-style:italic># export MANAGED_CLUSTER_NAME=cluster1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Deploy the controller</span>
</span></span><span style=display:flex><span>kubectl apply -f <span style=color:#4e9a06>${</span><span style=color:#000>GIT_PATH</span><span style=color:#4e9a06>}</span>/operator.yaml -n <span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_NAMESPACE</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>kubectl <span style=color:#204a87>set</span> env deployment/<span style=color:#4e9a06>${</span><span style=color:#000>COMPONENT</span><span style=color:#4e9a06>}</span> -n <span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_NAMESPACE</span><span style=color:#4e9a06>}</span> --containers<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>COMPONENT</span><span style=color:#4e9a06>}</span> <span style=color:#000>WATCH_NAMESPACE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_CLUSTER_NAME</span><span style=color:#4e9a06>}</span>
</span></span></code></pre></div><ul><li>See <a href=https://github.com/open-cluster-management-io/config-policy-controller>config-policy-controller</a> for more
information.</li></ul></li><li><p>Ensure the pod is running on the managed cluster with the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl get pods -n <span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_NAMESPACE</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>NAME                                               READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>config-policy-controller-7f8fb64d8c-pmfx4          1/1     Running   <span style=color:#0000cf;font-weight:700>0</span>          44s
</span></span></code></pre></div></li></ol><h2 id=sample-configuration-policy>Sample configuration policy</h2><p>After a successful deployment, test the policy framework and configuration policy controller with a sample policy. You
can use a policy that includes a <code>Placement</code> mapping or if you installed Application management&rsquo;s <code>PlacementRule</code>
support you can use either placement implementation. Perform the steps in the <strong>Placement API</strong> or the <strong>Placement Rule
API</strong> section based on which placement API you desire to use.</p><p>For more information on how to use a <code>ConfigurationPolicy</code>, read the
<a href=https://open-cluster-management.io/docs/getting-started/integration/policy-framework/#policy><code>Policy</code> API concept section</a>.</p><h3 id=placement-api>Placement API</h3><ol><li><p>Run the following command to create a policy on the hub that uses <code>Placement</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Configure kubectl to point to the hub cluster</span>
</span></span><span style=display:flex><span>kubectl config use-context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Apply the example policy and placement</span>
</span></span><span style=display:flex><span>kubectl apply -n default -f https://raw.githubusercontent.com/open-cluster-management-io/policy-collection/main/community/CM-Configuration-Management/policy-pod-placement.yaml
</span></span></code></pre></div></li><li><p>Update the <code>Placement</code> to distribute the policy to the managed cluster with the following command (this
<code>clusterSelector</code> will deploy the policy to all managed clusters):</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>kubectl patch -n default placement.cluster.open-cluster-management.io/placement-policy-pod --type<span style=color:#ce5c00;font-weight:700>=</span>merge -p <span style=color:#4e9a06>&#34;{\&#34;spec\&#34;:{\&#34;predicates\&#34;:[{\&#34;requiredClusterSelector\&#34;:{\&#34;labelSelector\&#34;:{\&#34;matchExpressions\&#34;:[]}}}]}}&#34;</span>
</span></span></code></pre></div></li><li><p>Make sure the <code>default</code> namespace has a <code>ManagedClusterSetBinding</code> for a <code>ManagedClusterSet</code> with at least one
managed cluster resource in the <code>ManagedClusterSet</code>. See
<a href=https://open-cluster-management.io/docs/concepts/managedclusterset/#bind-managedclusterset-to-a-namespace>Bind ManagedClusterSet to a namespace</a> for more
information on this.</p></li><li><p>To confirm that the managed cluster is selected by the <code>Placement</code>, run the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl get -n default placementdecision.cluster.open-cluster-management.io/placement-policy-pod-decision-1 -o yaml
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>status:
</span></span><span style=display:flex><span>  decisions:
</span></span><span style=display:flex><span>  - clusterName: &lt;managed cluster name&gt;
</span></span><span style=display:flex><span>    reason: <span style=color:#4e9a06>&#34;&#34;</span>
</span></span><span style=display:flex><span>...
</span></span></code></pre></div></li></ol><h3 id=placement-rule-api>Placement Rule API</h3><p><strong>NOTE:</strong> Skip this section if you applied the Placement API policy manifests.</p><ol><li><p>Run the following command to create a policy on the hub that uses <code>PlacementRule</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Configure kubectl to point to the hub cluster</span>
</span></span><span style=display:flex><span>kubectl config use-context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Apply the example policy and placement rule</span>
</span></span><span style=display:flex><span>kubectl apply -n default -f https://raw.githubusercontent.com/open-cluster-management-io/policy-collection/main/stable/CM-Configuration-Management/policy-pod.yaml
</span></span></code></pre></div></li><li><p>Update the <code>PlacementRule</code> to distribute the policy to the managed cluster with the following command (this
<code>clusterSelector</code> will deploy the policy to all managed clusters):</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl patch -n default placementrule.apps.open-cluster-management.io/placement-policy-pod --type<span style=color:#ce5c00;font-weight:700>=</span>merge -p <span style=color:#4e9a06>&#34;{\&#34;spec\&#34;:{\&#34;clusterSelector\&#34;:{\&#34;matchExpressions\&#34;:[]}}}&#34;</span>
</span></span><span style=display:flex><span>placementrule.apps.open-cluster-management.io/placement-policy-pod patched
</span></span></code></pre></div></li><li><p>To confirm that the managed cluster is selected by the <code>PlacementRule</code>, run the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl get -n default placementrule.apps.open-cluster-management.io/placement-policy-pod -o yaml
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>status:
</span></span><span style=display:flex><span>  decisions:
</span></span><span style=display:flex><span>  - clusterName: <span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_CLUSTER_NAME</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>    clusterNamespace: <span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_CLUSTER_NAME</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>...
</span></span></code></pre></div></li></ol><h3 id=final-steps-to-apply-the-policy>Final steps to apply the policy</h3><p>Perform the following steps to continue working with the policy to test the policy framework now that a placement method
has been selected between <code>Placement</code> or <code>PlacementRule</code>.</p><ol><li><p>Enforce the policy to make the configuration policy automatically correct any misconfigurations on the managed
cluster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl patch -n default policy.policy.open-cluster-management.io/policy-pod --type<span style=color:#ce5c00;font-weight:700>=</span>merge -p <span style=color:#4e9a06>&#34;{\&#34;spec\&#34;:{\&#34;remediationAction\&#34;: \&#34;enforce\&#34;}}&#34;</span>
</span></span><span style=display:flex><span>policy.policy.open-cluster-management.io/policy-pod patched
</span></span></code></pre></div></li><li><p>After a few seconds, your policy is propagated to the managed cluster. To confirm, run the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl config use-context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_MANAGED_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>$ kubectl get policy -A
</span></span><span style=display:flex><span>NAMESPACE   NAME                 REMEDIATION ACTION   COMPLIANCE STATE   AGE
</span></span><span style=display:flex><span>cluster1    default.policy-pod   enforce              Compliant          4m32s
</span></span></code></pre></div></li><li><p>The missing pod is created by the policy on the managed cluster. To confirm, run the following command on the managed
cluster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl get pod -n default
</span></span><span style=display:flex><span>NAME               READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>sample-nginx-pod   1/1     Running   <span style=color:#0000cf;font-weight:700>0</span>          23s
</span></span></code></pre></div></li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-da965a88320ed64c7db3afc8a1398f1e>4.2 - Open Policy Agent Gatekeeper</h1><p><a href=https://open-policy-agent.github.io/gatekeeper/website/>Gatekeeper</a> is a validating webhook with auditing capabilities
that can enforce custom resource definition-based policies that are run with the Open Policy Agent (OPA). Gatekeeper
constraints can be used to evaluate Kubernetes resource compliance. You can leverage OPA as the policy engine, and use
Rego as the policy language.</p><h2 id=installing-gatekeeper>Installing Gatekeeper</h2><p>See the <a href=https://open-policy-agent.github.io/gatekeeper/website/docs/install>Gatekeeper documentation</a> to install the
desired version of Gatekeeper to the managed cluster.</p><h2 id=sample-gatekeeper-policy>Sample Gatekeeper policy</h2><p>Gatekeeper policies are written using constraint templates and constraints. View the following YAML examples that use
Gatekeeper constraints in an OCM <code>Policy</code>:</p><ul><li><p><code>ConstraintTemplates</code> and constraints: Use the Gatekeeper integration feature by using OCM policies for multicluster
distribution of Gatekeeper constraints and Gatekeeper audit results aggregation on the hub cluster. The following
example defines a Gatekeeper <code>ConstraintTemplate</code> and constraint (<code>K8sRequiredLabels</code>) to ensure the &ldquo;gatekeeper&rdquo;
label is set on all namespaces:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>apiVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>policy.open-cluster-management.io/v1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Policy</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>metadata</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>require-gatekeeper-labels-on-ns</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>spec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>remediationAction</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>inform</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># (1)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>disabled</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>policy-templates</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>objectDefinition</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>apiVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>templates.gatekeeper.sh/v1beta1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ConstraintTemplate</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>metadata</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>k8srequiredlabels</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>spec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>crd</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>spec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>names</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>K8sRequiredLabels</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>validation</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>openAPIV3Schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>properties</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                    </span><span style=color:#204a87;font-weight:700>labels</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                      </span><span style=color:#204a87;font-weight:700>type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>array</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                      </span><span style=color:#204a87;font-weight:700>items</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>string</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>targets</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span>- <span style=color:#204a87;font-weight:700>target</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>admission.k8s.gatekeeper.sh</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>rego</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>|</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>                package k8srequiredlabels
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>                violation[{&#34;msg&#34;: msg, &#34;details&#34;: {&#34;missing_labels&#34;: missing}}] {
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>                  provided := {label | input.review.object.metadata.labels[label]}
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>                  required := {label | label := input.parameters.labels[_]}
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>                  missing := required - provided
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>                  count(missing) &gt; 0
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>                  msg := sprintf(&#34;you must provide labels: %v&#34;, [missing])
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>                }</span><span style=color:#f8f8f8;text-decoration:underline>                
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>objectDefinition</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>apiVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>constraints.gatekeeper.sh/v1beta1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>K8sRequiredLabels</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>metadata</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ns-must-have-gk</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>spec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>enforcementAction</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>dryrun</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>match</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>kinds</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span>- <span style=color:#204a87;font-weight:700>apiGroups</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>kinds</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;Namespace&#34;</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>parameters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>labels</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;gatekeeper&#34;</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><ol><li>Since the remediationAction is set to &ldquo;inform&rdquo;, the <code>enforcementAction</code> field of the Gatekeeper constraint is
overridden to &ldquo;warn&rdquo;. This means that Gatekeeper detects and warns you about creating or updating a namespace that
is missing the &ldquo;gatekeeper&rdquo; label. If the policy <code>remediationAction</code> is set to &ldquo;enforce&rdquo;, the Gatekeeper constraint
<code>enforcementAction</code> field is overridden to &ldquo;deny&rdquo;. In this context, this configuration prevents any user from
creating or updating a namespace that is missing the gatekeeper label.</li></ol><p>With the previous policy, you might receive the following policy status message:</p><blockquote><p>warn - you must provide labels: {&ldquo;gatekeeper&rdquo;} (on Namespace default); warn - you must provide labels:
{&ldquo;gatekeeper&rdquo;} (on Namespace gatekeeper-system).</p></blockquote><p>Once a policy containing Gatekeeper constraints or <code>ConstraintTemplates</code> is deleted, the constraints and
<code>ConstraintTemplates</code> are also deleted from the managed cluster.</p><p><strong>Notes:</strong></p><ul><li>The Gatekeeper audit functionality runs every minute by default. Audit results are sent back to the hub cluster to
be viewed in the OCM policy status of the managed cluster.</li></ul></li><li><p>Auditing Gatekeeper events: The following example uses an OCM
<a href=getting-started/integration/configuration-policy>configuration policy</a> within an OCM policy to check for Kubernetes
API requests denied by the Gatekeeper admission webhook:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>apiVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>policy.open-cluster-management.io/v1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Policy</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>metadata</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>policy-gatekeeper-admission</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>spec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>remediationAction</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>inform</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>disabled</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>policy-templates</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>objectDefinition</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>apiVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>policy.open-cluster-management.io/v1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ConfigurationPolicy</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>metadata</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>policy-gatekeeper-admission</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>spec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>remediationAction</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>inform</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># will be overridden by remediationAction in parent policy</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>severity</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>low</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>object-templates</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span>- <span style=color:#204a87;font-weight:700>complianceType</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>mustnothave</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>objectDefinition</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>apiVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>v1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Event</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>              </span><span style=color:#204a87;font-weight:700>metadata</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>namespace</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>gatekeeper-system</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># set it to the actual namespace where gatekeeper is running if different</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>annotations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>constraint_action</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>deny</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>constraint_kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>K8sRequiredLabels</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>constraint_name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ns-must-have-gk</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                  </span><span style=color:#204a87;font-weight:700>event_type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>violation</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-df1008e4da70f926bb56d3f52f741b71>5 - Policy framework</h1><p>The policy framework provides governance capabilities to OCM managed Kubernetes clusters. Policies provide visibility
and drive remediation for various security and configuration aspects to help IT administrators meet their requirements.</p><h2 id=api-concepts>API Concepts</h2><p>View the <a href=https://open-cluster-management.io/docs/concepts/policy/>Policy API</a> page for additional details about the Policy API managed by the Policy Framework
components, including:</p><ul><li><a href=https://open-cluster-management.io/docs/concepts/policy/#policy><code>Policy</code></a></li><li><a href=https://open-cluster-management.io/docs/concepts/policy/#policyset><code>PolicySet</code></a></li><li><a href=https://open-cluster-management.io/docs/concepts/policy/#placementbinding><code>PlacementBinding</code></a></li></ul><h2 id=architecture>Architecture</h2><div style=text-align:center;padding:20px><img src=/policy-framework-architecture-diagram.png alt="Policy framework architecture" style="margin:0 auto;width:80%"></div><p>The governance policy framework distributes policies to managed clusters and collects results to send back to the hub
cluster.</p><ul><li><a href=https://github.com/open-cluster-management-io/governance-policy-propagator>Policy propagator</a></li><li><a href=https://github.com/open-cluster-management-io/governance-policy-framework-addon>Policy framework addon</a></li></ul><p>Note that in OCM versions newer than 0.8.x, the following controllers were consolidated into the
<a href=https://github.com/open-cluster-management-io/governance-policy-framework-addon>policy framework addon</a>.</p><ul><li><a href=https://github.com/open-cluster-management-io/governance-policy-spec-sync>Policy spec sync</a></li><li><a href=https://github.com/open-cluster-management-io/governance-policy-status-sync>Policy status sync</a></li><li><a href=https://github.com/open-cluster-management-io/governance-policy-template-sync>Policy template sync</a></li></ul><h2 id=prerequisite>Prerequisite</h2><p>You must meet the following prerequisites to install the policy framework:</p><ul><li><p>Ensure <a href=https://kubernetes.io/docs/tasks/tools/install-kubectl><code>kubectl</code></a> and
<a href=https://kubectl.docs.kubernetes.io/installation/kustomize/><code>kustomize</code></a> are installed.</p></li><li><p>Ensure <a href=https://golang.org/doc/install>Golang</a> is installed, if you are planning to install from the source.</p></li><li><p>Ensure the <code>open-cluster-management</code> <em>cluster manager</em> is installed. See
<a href=https://open-cluster-management.io/docs/getting-started/installation/start-the-control-plane/>Start the control plane</a> for more information.</p></li><li><p>Ensure the <code>open-cluster-management</code> <em>klusterlet</em> is installed. See
<a href=https://open-cluster-management.io/docs/getting-started/installation/register-a-cluster/>Register a cluster</a> for more information.</p></li><li><p>If you are using <code>PlacementRules</code> with your policies, ensure the <code>open-cluster-management</code> <em>application</em> is installed
. See <a href=https://open-cluster-management.io/docs/getting-started/integration/app-lifecycle/>Application management</a> for more information. If you are using the
default <code>Placement</code> API, you can skip the Application management installation, but you do need to install the
<code>PlacementRule</code> CRD with this command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>kubectl apply -f https://raw.githubusercontent.com/open-cluster-management-io/multicloud-operators-subscription/main/deploy/hub-common/apps.open-cluster-management.io_placementrules_crd.yaml
</span></span></code></pre></div></li></ul><h2 id=install-the-governance-policy-framework-hub-components>Install the governance-policy-framework hub components</h2><h3 id=install-via-clusteradm-cli>Install via Clusteradm CLI</h3><p>Ensure <code>clusteradm</code> CLI is installed and is at least v0.3.0. Download and extract the
<a href=https://github.com/open-cluster-management-io/clusteradm/releases/latest>clusteradm binary</a>. For more details see the
<a href=https://github.com/open-cluster-management-io/clusteradm/blob/main/README.md#quick-start>clusteradm GitHub page</a>.</p><ol><li><p>Deploy the policy framework controllers to the hub cluster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># The context name of the clusters in your kubeconfig</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># If the clusters are created by KinD, then the context name will the follow the pattern &#34;kind-&lt;cluster name&gt;&#34;.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#ce5c00;font-weight:700>=</span>&lt;your hub cluster context&gt;           <span style=color:#8f5902;font-style:italic># export CTX_HUB_CLUSTER=kind-hub</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>CTX_MANAGED_CLUSTER</span><span style=color:#ce5c00;font-weight:700>=</span>&lt;your managed cluster context&gt;   <span style=color:#8f5902;font-style:italic># export CTX_MANAGED_CLUSTER=kind-cluster1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Set the deployment namespace</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>HUB_NAMESPACE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;open-cluster-management&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Deploy the policy framework hub controllers</span>
</span></span><span style=display:flex><span>clusteradm install hub-addon --names governance-policy-framework --context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span></code></pre></div></li><li><p>Ensure the pods are running on the hub with the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl get pods -n <span style=color:#4e9a06>${</span><span style=color:#000>HUB_NAMESPACE</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>NAME                                                       READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>governance-policy-addon-controller-bc78cbcb4-529c2         1/1     Running   <span style=color:#0000cf;font-weight:700>0</span>          94s
</span></span><span style=display:flex><span>governance-policy-propagator-8c77f7f5f-kthvh               1/1     Running   <span style=color:#0000cf;font-weight:700>0</span>          94s
</span></span></code></pre></div><ul><li>See more about the governance-policy-framework components:<ul><li><a href=https://github.com/open-cluster-management-io/governance-policy-propagator>policy-propagator</a></li><li><a href=https://github.com/open-cluster-management-io/governance-policy-addon-controller>policy-addon-controller</a></li></ul></li></ul></li></ol><h3 id=install-from-source>Install from source</h3><ol><li><p>Deploy the policy Custom Resource Definitions (CRD) and policy propagator component to the <code>open-cluster-management</code>
namespace on the hub cluster with the following commands:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Configure kubectl to point to the hub cluster</span>
</span></span><span style=display:flex><span>kubectl config use-context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Create the namespace</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>HUB_NAMESPACE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;open-cluster-management&#34;</span>
</span></span><span style=display:flex><span>kubectl create ns <span style=color:#4e9a06>${</span><span style=color:#000>HUB_NAMESPACE</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Set the hub cluster name</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>HUB_CLUSTER_NAME</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;hub&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Set the hub kubeconfig file</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>HUB_KUBECONFIG</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;hub-kubeconfig&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Apply the CRDs</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>GIT_PATH</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;https://raw.githubusercontent.com/open-cluster-management-io/governance-policy-propagator/v0.12.0/deploy&#34;</span>
</span></span><span style=display:flex><span>kubectl apply -f <span style=color:#4e9a06>${</span><span style=color:#000>GIT_PATH</span><span style=color:#4e9a06>}</span>/crds/policy.open-cluster-management.io_policies.yaml
</span></span><span style=display:flex><span>kubectl apply -f <span style=color:#4e9a06>${</span><span style=color:#000>GIT_PATH</span><span style=color:#4e9a06>}</span>/crds/policy.open-cluster-management.io_placementbindings.yaml
</span></span><span style=display:flex><span>kubectl apply -f <span style=color:#4e9a06>${</span><span style=color:#000>GIT_PATH</span><span style=color:#4e9a06>}</span>/crds/policy.open-cluster-management.io_policyautomations.yaml
</span></span><span style=display:flex><span>kubectl apply -f <span style=color:#4e9a06>${</span><span style=color:#000>GIT_PATH</span><span style=color:#4e9a06>}</span>/crds/policy.open-cluster-management.io_policysets.yaml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Deploy the policy-propagator</span>
</span></span><span style=display:flex><span>kubectl apply -f <span style=color:#4e9a06>${</span><span style=color:#000>GIT_PATH</span><span style=color:#4e9a06>}</span>/operator.yaml -n <span style=color:#4e9a06>${</span><span style=color:#000>HUB_NAMESPACE</span><span style=color:#4e9a06>}</span>
</span></span></code></pre></div></li><li><p>The policy propagator manages a webhook that requires a certificate. You can either disable the webhook or deploy <code>cert-manager</code> alongside the webhook resources to ensure the policy propagator runs properly:</p><ul><li><p>Optional 1: Enable the webhook</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.12.0/cert-manager.yaml
</span></span><span style=display:flex><span>kubectl apply -f <span style=color:#4e9a06>${</span><span style=color:#000>GIT_PATH</span><span style=color:#4e9a06>}</span>/webhook.yaml -n <span style=color:#4e9a06>${</span><span style=color:#000>HUB_NAMESPACE</span><span style=color:#4e9a06>}</span>
</span></span></code></pre></div></li><li><p>Optional 2: Disable the webhook with the <code>--enable-webhooks=false</code> argument</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl patch deployment governance-policy-propagator --type<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;json&#39;</span> -p<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;[
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>     {&#34;op&#34;: &#34;add&#34;, &#34;path&#34;: &#34;/spec/template/spec/containers/0/args/-&#34;, &#34;value&#34;: &#34;--enable-webhooks=false&#34;}
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>   ]&#39;</span> -n <span style=color:#4e9a06>${</span><span style=color:#000>HUB_NAMESPACE</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>kubectl patch deployment governance-policy-propagator --type<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;json&#39;</span> -p<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;[
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>     {&#34;op&#34;: &#34;remove&#34;, &#34;path&#34;: &#34;/spec/template/spec/containers/0/volumeMounts/0&#34;},
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>     {&#34;op&#34;: &#34;remove&#34;, &#34;path&#34;: &#34;/spec/template/spec/volumes/0&#34;}
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>   ]&#39;</span> -n <span style=color:#4e9a06>${</span><span style=color:#000>HUB_NAMESPACE</span><span style=color:#4e9a06>}</span>
</span></span></code></pre></div></li></ul></li><li><p>Ensure the pods are running on the hub with the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl get pods -n <span style=color:#4e9a06>${</span><span style=color:#000>HUB_NAMESPACE</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>NAME                                                       READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>governance-policy-propagator-8c77f7f5f-kthvh               1/1     Running   <span style=color:#0000cf;font-weight:700>0</span>          94s
</span></span></code></pre></div><ul><li>See more about the governance-policy-framework components:<ul><li><a href=https://github.com/open-cluster-management-io/governance-policy-propagator>policy-propagator</a></li><li><a href=https://github.com/open-cluster-management-io/governance-policy-addon-controller>policy-addon-controller</a></li></ul></li></ul></li></ol><h2 id=deploy-the-synchronization-components-to-the-managed-clusters>Deploy the synchronization components to the managed cluster(s)</h2><h3 id=deploy-via-clusteradm-cli>Deploy via Clusteradm CLI</h3><ol><li><p>To deploy the synchronization components to a self-managed hub cluster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>clusteradm addon <span style=color:#204a87>enable</span> --names governance-policy-framework --clusters &lt;managed_hub_cluster_name&gt; --annotate addon.open-cluster-management.io/on-multicluster-hub<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>true</span> --context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span></code></pre></div><p>To deploy the synchronization components to a managed cluster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>clusteradm addon <span style=color:#204a87>enable</span> --names governance-policy-framework --clusters &lt;cluster_name&gt; --context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span></code></pre></div></li><li><p>Verify that the
<a href=https://github.com/open-cluster-management-io/governance-policy-framework-addon>governance-policy-framework-addon controller</a>
pod is running on the managed cluster with the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl get pods -n open-cluster-management-agent-addon
</span></span><span style=display:flex><span>NAME                                                     READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>governance-policy-framework-addon-57579b7c-652zj         1/1     Running   <span style=color:#0000cf;font-weight:700>0</span>          87s
</span></span></code></pre></div><p><strong>NOTE</strong>: If you are using clusteradm v0.3.x or older, the pod will be called <code>governance-policy-framework</code> and have
a container per synchronization component (2 on a self-managed Hub, or 3 on a managed cluster).</p></li></ol><h3 id=deploy-from-source>Deploy from source</h3><ol><li><p>Export the hub cluster <code>kubeconfig</code> with the following command:</p><p>For <code>kind</code> cluster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>kind get kubeconfig --name <span style=color:#4e9a06>${</span><span style=color:#000>HUB_CLUSTER_NAME</span><span style=color:#4e9a06>}</span> --internal &gt; <span style=color:#4e9a06>${</span><span style=color:#000>HUB_KUBECONFIG</span><span style=color:#4e9a06>}</span>
</span></span></code></pre></div><p>For non-<code>kind</code> clusters:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>kubectl config view --context<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>CTX_HUB_CLUSTER</span><span style=color:#4e9a06>}</span> --minify --flatten &gt; <span style=color:#4e9a06>${</span><span style=color:#000>HUB_KUBECONFIG</span><span style=color:#4e9a06>}</span>
</span></span></code></pre></div></li><li><p>Deploy the
<a href=https://github.com/open-cluster-management-io/governance-policy-framework-addon>policy synchronization component</a>
to each managed cluster. Run the following commands:</p><p><strong>NOTE</strong>: The <code>--disable-spec-sync</code> flag should be set to <code>true</code> in the <code>governance-policy-framework-addon</code> container
arguments when deploying the synchronization component to a hub that is managing itself.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Set whether or not this is being deployed on the Hub</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>DEPLOY_ON_HUB</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Configure kubectl to point to the managed cluster</span>
</span></span><span style=display:flex><span>kubectl config use-context <span style=color:#4e9a06>${</span><span style=color:#000>CTX_MANAGED_CLUSTER</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Create the namespace for the synchronization components</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>MANAGED_NAMESPACE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;open-cluster-management-agent-addon&#34;</span>
</span></span><span style=display:flex><span>kubectl create ns <span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_NAMESPACE</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Create the secret to authenticate with the hub</span>
</span></span><span style=display:flex><span>kubectl -n <span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_NAMESPACE</span><span style=color:#4e9a06>}</span> create secret generic hub-kubeconfig --from-file<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>kubeconfig</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>HUB_KUBECONFIG</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Apply the policy CRD</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>GIT_PATH</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;https://raw.githubusercontent.com/open-cluster-management-io&#34;</span>
</span></span><span style=display:flex><span>kubectl apply -f <span style=color:#4e9a06>${</span><span style=color:#000>GIT_PATH</span><span style=color:#4e9a06>}</span>/governance-policy-propagator/v0.12.0/deploy/crds/policy.open-cluster-management.io_policies.yaml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Set the managed cluster name and create the namespace</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>MANAGED_CLUSTER_NAME</span><span style=color:#ce5c00;font-weight:700>=</span>&lt;your managed cluster name&gt;  <span style=color:#8f5902;font-style:italic># export MANAGED_CLUSTER_NAME=cluster1</span>
</span></span><span style=display:flex><span>kubectl create ns <span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_CLUSTER_NAME</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Deploy the synchronization component</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>COMPONENT</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;governance-policy-framework-addon&#34;</span>
</span></span><span style=display:flex><span>kubectl apply -f <span style=color:#4e9a06>${</span><span style=color:#000>GIT_PATH</span><span style=color:#4e9a06>}</span>/<span style=color:#4e9a06>${</span><span style=color:#000>COMPONENT</span><span style=color:#4e9a06>}</span>/v0.12.0/deploy/operator.yaml -n <span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_NAMESPACE</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>kubectl patch deployment governance-policy-framework-addon -n <span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_NAMESPACE</span><span style=color:#4e9a06>}</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  -p <span style=color:#4e9a06>&#34;{\&#34;spec\&#34;:{\&#34;template\&#34;:{\&#34;spec\&#34;:{\&#34;containers\&#34;:[{\&#34;name\&#34;:\&#34;governance-policy-framework-addon\&#34;,\&#34;args\&#34;:[\&#34;--hub-cluster-configfile=/var/run/klusterlet/kubeconfig\&#34;, \&#34;--cluster-namespace=</span><span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_CLUSTER_NAME</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>\&#34;, \&#34;--enable-lease=true\&#34;, \&#34;--log-level=2\&#34;, \&#34;--disable-spec-sync=</span><span style=color:#4e9a06>${</span><span style=color:#000>DEPLOY_ON_HUB</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>\&#34;]}]}}}}&#34;</span>
</span></span></code></pre></div></li><li><p>Verify that the pods are running on the managed cluster with the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>$ kubectl get pods -n <span style=color:#4e9a06>${</span><span style=color:#000>MANAGED_NAMESPACE</span><span style=color:#4e9a06>}</span>
</span></span><span style=display:flex><span>NAME                                                READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>governance-policy-framework-addon-6474b6d898-tmkw6  1/1     Running   <span style=color:#0000cf;font-weight:700>0</span>          2m14s
</span></span></code></pre></div></li></ol><h2 id=what-is-next>What is next</h2><p>Install the <a href=../policy-controllers>policy controllers</a> to the managed clusters.</p></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Slack aria-label=Slack><a target=_blank rel=noopener href=https://kubernetes.slack.com/channels/open-cluster-mgmt aria-label=Slack><i class="fab fa-slack"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Youtube aria-label=Youtube><a target=_blank rel=noopener href=https://www.youtube.com/c/OpenClusterManagement aria-label=Youtube><i class="fab fa-youtube"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Calendar aria-label=Calendar><a target=_blank rel=noopener href="https://calendar.google.com/calendar/u/0/embed?src=openclustermanagement@gmail.com" aria-label=Calendar><i class="fa fa-calendar"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/open-cluster-management-io aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Mail Group" aria-label="Mail Group"><a target=_blank rel=noopener href=https://groups.google.com/g/open-cluster-management aria-label="Mail Group"><i class="fa fa-envelope"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2020&ndash;2024
<span class=td-footer__authors>Open Cluster Management Authors. The Linux Foundation® (TLF) has registered trademarks and uses trademarks. For a list of TLF trademarks, see <a href=https://www.linuxfoundation.org/trademark-usage/>Trademark Usage</a></span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span></div></div></div></footer></div><script src=/js/main.min.28d37d37ae72f0774e7323368bd712a47d95012b9b0350c0f0df25c9cc6f792b.js integrity="sha256-KNN9N65y8HdOcyM2i9cSpH2VASubA1DA8N8lycxveSs=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>